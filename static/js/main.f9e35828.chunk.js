(this.webpackJsonpzadanie_staz=this.webpackJsonpzadanie_staz||[]).push([[0],{149:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),l=a.n(r),o=(a(81),a(82),a(30)),i=a(22),s=a(158),u=(a(83),a(56)),m=a.n(u),d=a(68),p=a(11),h=Object(n.createContext)({companies:[],searchCompany:function(){},searchedCompanies:[],loading:!1}),f=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)([]),i=Object(p.a)(o,2),s=i[0],u=i[1],f=Object(n.useState)(!1),E=Object(p.a)(f,2),b=E[0],v=E[1];Object(n.useEffect)((function(){var e;function t(){return(t=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://recruitment.hal.skygate.io/companies").then((function(e){return e.json()})).then((function(t){return e=t}));case 2:l(e),a=[],n=0;case 5:if(!(n<e.length)){t.next=11;break}return t.next=8,fetch("https://recruitment.hal.skygate.io/incomes/".concat(e[n].id)).then((function(e){return e.json()})).then((function(e){return a.push(e)}));case 8:n++,t.next=5;break;case 11:l((function(){var t=[];return e.forEach((function(e,n){var c=0;a[n].incomes.forEach((function(e){c+=Number(e.value)}));var r=Object.assign(e,a[n],{totalIncomes:c.toFixed(2)});t.push(r),t.sort((function(e,t){return t.totalIncomes-e.totalIncomes}))})),t})),v(!0);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);return c.a.createElement(h.Provider,{value:{companies:r,searchCompany:function(e){var t=r.filter((function(t){return t.name.toLowerCase().includes(e)}));u(t)},searchedCompanies:s,dataLoaded:b}},e.children)},E=a(159),b=a(155),v=a(156),g=a(157),y=function(e){var t,a=e.companies,r=Object(n.useContext)(h).dataLoaded;return 0!==a.length&&(t=a.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.city),c.a.createElement("td",null,r?e.totalIncomes:c.a.createElement(b.a,{animation:"border"})),c.a.createElement("td",null,c.a.createElement(o.b,{to:{pathname:"/company/".concat(e.id),params:{company:e}}},c.a.createElement(v.a,{size:"sm",disabled:!r},"View details"))))}))),c.a.createElement("div",null,c.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"text-center",responsive:"sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Id"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"City"),c.a.createElement("th",null,"Total Incomes"),c.a.createElement("th",null,"Details"))),c.a.createElement("tbody",null,t)))},j=a(162),O=function(e){for(var t=e.companiesPerPage,a=e.totalCompanies,n=e.paginate,r=e.activePage,l=[],o=function(e){l.push(c.a.createElement(j.a.Item,{key:e,active:e===r,onClick:function(){return n(e)}},e))},i=1;i<=Math.ceil(a/t);i++)o(i);return c.a.createElement(j.a,{className:"d-flex flex-wrap"},l)},x=function(){var e=Object(n.useState)(1),t=Object(p.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(10),o=Object(p.a)(l,1)[0],i=Object(n.useContext)(h),s=i.companies,u=i.searchedCompanies,m=i.searchCompany,d=Object(n.useState)(!1),f=Object(p.a)(d,2),b=f[0],v=f[1];0!==u.length&&u.sort((function(e,t){return t.totalIncomes-e.totalIncomes}));var g=a*o,j=g-o,x=b?u.slice(j,g):s.slice(j,g);return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a.Control,{type:"text",className:"my-3",placeholder:"Search company",onChange:function(e){return function(e){m(e.target.value),""!==e.target.value?(v(!0),r(1)):v(!1)}(e)}}),c.a.createElement(y,{companies:x}),c.a.createElement(O,{companiesPerPage:o,totalCompanies:0!==u.length||b?u.length:s.length,paginate:function(e){return r(e)},activePage:a}))},C=a(75),k=a(161),w=a(160),S=a(58),D=a.n(S),I=a(71),N=a.n(I),T=(a(92),function(e){var t=Object(n.useState)(),a=Object(p.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(),s=Object(p.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(new Date("2019/01/01")),h=Object(p.a)(d,2),f=h[0],E=h[1],b=Object(n.useState)(new Date),g=Object(p.a)(b,2),y=g[0],j=g[1],O=Object(n.useState)(!1),x=Object(p.a)(O,2),S=x[0],I=x[1],T=Object(n.useState)(!1),P=Object(p.a)(T,2),F=P[0],M=P[1],z=Object(n.useState)({options:{chart:{id:"basic-bar"},xaxis:{categories:["January","February","March","April","May","June","July","August","September","October","November","December"]}},series:[{name:"",data:[]}]}),J=Object(p.a)(z,2),A=J[0],L=J[1];if(void 0===e.location.params)return c.a.createElement(i.a,{to:"/"});var B=e.location.params.company,G=function(e,t){switch(t){case"startPicker":E(e);break;case"endPicker":j(e);break;default:E(new Date("2019/01/01")),j(new Date)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,{className:"my-4"},c.a.createElement(k.a.Body,null,c.a.createElement(k.a.Title,null,B.name),c.a.createElement(k.a.Subtitle,{className:"mb-2 text-muted"},"City: ",B.city),c.a.createElement(k.a.Text,null,"Total Incomes: ",B.totalIncomes),c.a.createElement(k.a.Text,null,"Average Incomes: ",(B.totalIncomes/B.incomes.length).toFixed(2)),c.a.createElement(k.a.Text,null,"Last Month Incomes: ",function(){var e=0,t=new Date;return B.incomes.forEach((function(a){new Date(a.date).getFullYear()===t.getFullYear()-1&&new Date(a.date).getMonth()===t.getMonth()-1&&(e+=Number(a.value))})),e}()),c.a.createElement(v.a,{onClick:function(){return I(!S)},"aria-controls":"example-collapse-text","aria-expanded":S},"Show Custom Data"),c.a.createElement(v.a,{variant:"primary",className:"ml-3",onClick:function(){return function(){for(var e=[],t=function(t){var a=0;B.incomes.forEach((function(e){new Date(e.date).getMonth()===t&&(a+=Number(e.value))})),e.push(a.toFixed())},a=0;a<=11;a++)t(a);L((function(t){return Object(C.a)({},t,{series:[{name:"month-incomes",data:e}]})})),M(!0)}()}},"Get Chart"),c.a.createElement(w.a,{in:S},c.a.createElement("div",{id:"example-collapse-text"},c.a.createElement(v.a,{variant:"primary",size:"sm",className:"my-4 mx-2",onClick:function(){return function(){var e=[];e=B.incomes.filter((function(e){var t=new Date(e.date);return t.getTime()>f.getTime()&&t.getTime()<y.getTime()}));var t=0;e.forEach((function(e){t+=Number(e.value)})),l(t.toFixed(2)),m((t/e.length).toFixed(2))}()}},"Get"),c.a.createElement(D.a,{selected:f,onChange:function(e){return G(e,"startPicker")},selectsStart:!0,startDate:f,endDate:y}),c.a.createElement(D.a,{selected:y,onChange:function(e){return G(e,"endPicker")},selectsEnd:!0,startDate:f,endDate:y,minDate:f,className:"ml-3"}),c.a.createElement(k.a.Text,null,"Total Custom Incomes: ",r||"---"),c.a.createElement(k.a.Text,null,"Average Custom Incomes: ",u||"---"))),c.a.createElement("div",{className:"my-3"},c.a.createElement(v.a,{variant:"outline-primary",onClick:function(){return e.history.push("/")}},"Back to Main Page")))),F&&c.a.createElement(N.a,{options:A.options,series:A.series,type:"bar",style:{width:"100%"}}))}),P=function(){return c.a.createElement(o.a,null,c.a.createElement(s.a,null,c.a.createElement(f,null,c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/",exact:!0},c.a.createElement(x,null)),c.a.createElement(i.b,{path:"/company/:id",component:T}),">"))))};l.a.render(c.a.createElement(P,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a(149)},81:function(e,t,a){},83:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.f9e35828.chunk.js.map